# Микро-CRM для торговли

## Общие требования к выполнению заданий
- Язык: PHP. Обязательная разбивка структуры кода по принципу MVC и использование классов и моделей. Фреймворк: любой, но желательно Laravel.
- База данных: MySQL или MariaDB.
- Код должен быть прокомментирован (блоки внутри методов, условия, а также PHPDoc у самих методов).
- Исходный код необходимо разместить в GIT (любой репозиторий на выбор) и выдать доступ.

## Задание
Дана следующая схема таблиц:

### Таблица `products`
| Поле | Тип | Описание |
|------|-----|----------|
| id | unsigned big integer, AI, pk | Идентификатор продукта |
| name | varchar(255) | Название продукта |
| price | float | Цена продукта |

### Таблица `orders`
| Поле | Тип | Описание |
|------|-----|----------|
| id | unsigned big integer, AI, pk | Идентификатор заказа |
| customer | varchar(255) | Имя клиента |
| created_at | timestamp | Дата создания заказа |
| completed_at | timestamp | Дата завершения заказа |
| warehouse_id | unsigned big integer, fk | Идентификатор склада |
| status | varchar(255) | Статус заказа (“active”, “completed”, “canceled”) |

### Таблица `order_items`
| Поле | Тип | Описание |
|------|-----|----------|
| id | unsigned big integer, AI, pk | Идентификатор позиции заказа |
| order_id | unsigned big integer, fk | Идентификатор заказа |
| product_id | unsigned big integer, fk | Идентификатор продукта |
| count | integer | Количество товара |

### Таблица `warehouses`
| Поле | Тип | Описание |
|------|-----|----------|
| id | unsigned big integer, AI, pk | Идентификатор склада |
| name | varchar(255) | Название склада |

### Таблица `stocks`
| Поле | Тип | Описание |
|------|-----|----------|
| product_id | fk | Идентификатор продукта |
| warehouse_id | fk | Идентификатор склада |
| stock | integer | Количество товара на складе |

## Часть 1
Требуется реализовать набор Rest-методов, которые позволят:
1. Просмотреть список складов.
2. Просмотреть список товаров с их остатками по складам.
3. Получить список заказов (с фильтрами и настраиваемой пагинацией).
4. Создать заказ (в заказе может быть несколько позиций с разным количеством).
5. Обновить заказ (данные покупателя и список позиций, но не статус).
6. Завершить заказ.
7. Отменить заказ.
8. Возобновить заказ (перевод из отмены в работу).

Товары должны корректно списываться и возвращаться на остаток. Важно: если операцию невозможно выполнить (возврат в работу заказа, когда товаров уже нет), необходимо вернуть ошибку.

**СХЕМЫ УКАЗАННЫХ ТАБЛИЦ МЕНЯТЬ НЕЛЬЗЯ!**

## Часть 2
Требуется реализовать историю движений товаров.

Движение - любое изменение количества товара на остатке склада.

После выполнения первой части, её необходимо доработать. Требуется создать таблицу движений и модель, которые позволят реализовать Rest-метод для просмотра историй изменения остатков товаров.

Метод должен поддерживать фильтры (по складу, по товару, по датам), а также настраиваемую пагинацию.

## Часть 3
Справочники товаров, складов и остатков необходимо наполнить готовыми тестовыми данными. Наполнение должно происходить путём вызова консольной команды.